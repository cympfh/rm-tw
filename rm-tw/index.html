<title>rm tw</title>
<script src="/socket.io/socket.io.js"></script>
<style>
.tw {
  display: block;
  width: 400px;
  border: 1px aqua solid;
  background-color: #fafaff;
  font-size: 12px;
  padding: 5px;
}
</style>
<script>

var ID = "@ID@";

var tl = [];

var socket = io.connect('http://unddich.herokuapp.com/');
socket.emit('update', { ID : ID });
socket.on('data', function (datum) {

  tl = datum;
  for (var i=0; i < tl.length; ++i)
    tl[i]['del'] = false;

  for (var i=0; i < tl.length; ++i) {
    var d = tl[i];

    var t = document.createElement('div');
    t.className = "tw";
    t.id = "tw" + i;
    t.innerHTML = d.text + ' / ' + d.sid;
    t.style.position = "relative";
    t.style.left = "0";
    t.style.top = "0";

    t.onclick = function() {
      click(this.id);
      return false;
    }

    X.appendChild(t);
  }
});

function click(id) {
  var idx = +id.slice(2)
  if (tl[idx]) {
    tl[idx] = false;
    document.getElementById(id).style.left = 0;
  } else {
    tl[idx] = true;
    document.getElementById(id).style.left = "50px";
  }
}

</script>
<body>
<code>$ rm -rf tw/*</code>
<div id=X></div>
<hr>
